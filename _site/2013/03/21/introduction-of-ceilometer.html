<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>OpenStack Ceilometer项目简介</title>
  <meta name="description" content="Ceilometer项目创建时最初的目的是实现一个能为计费系统采集数据的框架。在G版的开发中，社区已经更新了他们的目标，新目标是希望Ceilometer成为OpenStack里数据采集（监控数据、计费数据）的唯一基础设施，采集到的数据提供给监控、计费、面板等项目使用。Project GoalFor Grizzly...">

  <!-- CSS files -->
  <link rel="stylesheet" href="https://blog.mana.love/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://blog.mana.love/css/main.css">

  <link rel="canonical" href="https://blog.mana.love/2013/03/21/introduction-of-ceilometer.html">
  <link rel="alternate" type="application/rss+xml" title="喵喵清吟 | 爱菜家希望之神小飞鸟官方博客" href="https://blog.mana.love /feed.xml " />

  <!-- Icons -->
  <!-- 16x16 -->
  <!--<link rel="shortcut icon" href="https://blog.mana.love/favicon.ico">-->
   <!--32x32--> 
  <link rel="shortcut icon" href="https://blog.mana.love/img/favicon.png">
  <!--<link rel="shortcut icon" href="https://www.tuchuang001.com/images/2017/05/20/favicon.png">-->
    <!--百度统计-->
    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?9e7b394e0b9f2ed7bbe4edf5607e7dad";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

</head>


<body>
  <div class="row">
    <div class="col s12 m3">
      <div class="table cover">
         

<div class="cover-card table-cell table-middle">
  <!---->
  <a href="https://blog.mana.love/" class="avatar_a"><img src="" alt="" class="avatar" style="outline: 0;border: 0;"/></a>
  <!--<img src="https://www.tuchuang001.com/images/2017/05/20/site-avatar.png" alt="" class="avatar">-->
  <!---->
  <a href="https://blog.mana.love/" class="author_name">小飞鸟</a>
  <span class="author_job">爱菜家、希望之神</span>
  <span class="author_bio mbm">爱菜、爱菜、爱菜</span>
  <nav class="nav">
    <ul class="nav-list">
      <li class="nav-item">
        <a href="https://blog.mana.love/">首页</a>
        <span>/</span>
      </li>
       
      <li class="nav-item">
        <a href="https://blog.mana.love/about/">关于</a>
        
          <span>/</span>
        
      </li>
        
      <li class="nav-item">
        <a href="https://blog.mana.love/archive/">归档</a>
        
          <span>/</span>
        
      </li>
            
      <li class="nav-item">
        <a href="https://blog.mana.love/categories/">分类</a>
        
          <span>/</span>
        
      </li>
        
      <li class="nav-item">
        <a href="https://blog.mana.love/links/">友链</a>
        
          <span>/</span>
        
      </li>
          
      <li class="nav-item">
        <a href="https://blog.mana.love/tags/">标签</a>
        
          <span>/</span>
        
      </li>
                             
    </ul>
  </nav>
  <div class="social-links">
  <ul>
    <li><a href="http://github.com/ashidamana" class="social-link-item" target="_blank"><i class="fa fa-fw fa-github"></i></a></li>
    <li><a href="http://www.weibo.com/flyerangel" class="social-link-item" target="_blank"><i class="fa fa-fw fa-weibo"></i></a></li>
    
    <li><a href="mailto:flyer@mana.love" class="social-link-item" target="_blank"><i class="fa fa-fw fa-envelope"></i></a></li>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
  </ul>
</div>

</div>

      </div>
    </div>
    <div class="col s12 m9">
      <div class="post-listing">
        <!-- 判断是否插入首页图片 -->


<!-- 添加日期和阅读 -->
<div id="post">
    <header class="post-header">
        <span class="post-meta">
            <span class="post-date">
                2013-03-21
            </span> 
            •
            <span class="read-time" title="Estimated read time">
  
  
    1 min read
  
</span>

            •
            阅读(<span data-hk-page="current"> - </span>次)<span class="pause"></span>
        </span>
        <h1 title="OpenStack Ceilometer项目简介">OpenStack Ceilometer项目简介</h1>
    </header>
    
    <!-- 引入google code pretiffy高亮样式 -->
    <link href="/js/google-code-prettify/themes/github-v2.css" rel="stylesheet" type="text/css" />
    
    <!-- 添加博文 -->
    <article class="post-content">
        <p>Ceilometer项目创建时最初的目的是实现一个能为计费系统采集数据的框架。在G版的开发中，社区已经更新了他们的目标，新目标是希望Ceilometer成为OpenStack里数据采集（监控数据、计费数据）的唯一基础设施，采集到的数据提供给监控、计费、面板等项目使用。</p>

<h3 id="project-goal">Project Goal</h3>

<p>For Grizzly, the new objective is The project aims to become the infrastructure to collect measurements within OpenStack so that no two agents would need to be written to collect the same data. It’s primary targets are monitoring and metering, but the framework should be easily expandable to collect for other needs. To that effect, Ceilometer should be able to share collected data with a variety of consumers.</p>

<p>In the 0.1 (folsom) release its goal was just to deliver a unique point of contact for billing systems to aquire all meters they need to establish customer billing, across all current and futureOpenStack core components.</p>

<p><strong>Wiki地址：</strong> https://wiki.openstack.org/wiki/Ceilometer
<strong>代码地址：</strong> https://github.com/openstack/ceilometer
<strong>文档地址：</strong> http://docs.openstack.org/developer/ceilometer/</p>

<h3 id="section">社区现状</h3>

<p>目前Ceilometer项目有11000+ lines代码，16位贡献者，最近的活跃贡献者有7位。社区的Roadmap如下：</p>

<p>v1 delivered with Folsom with all functions required to collect base metering info and provide standard API access
v2 delivered with G as an incubated project with (subject to variation)
End-User API access to own metering information
Integration of information summary as an Horizon plugin
New agents for other OpenStack components (Quantum Engines? Heat? etc…)
Multi publisher to handle other usage for data collection
Individual frequency per meter
Move to core for H</p>

<h3 id="ceilometer">Ceilometer架构介绍</h3>

<p><img src="https://www.tuchuang001.com/images/2017/05/20/tech-ceilometer-architecture.png" alt="Ceilometer架构介绍" /></p>

<h3 id="ceilometeragentcollectordatastoreapi">Ceilometer项目主要由Agent，Collector，DataStore，API和消息队列组成。</h3>

<h4 id="agent">Agent</h4>

<p>Agent的主要职责是周期性的从它管理的Plugin中轮询，触发查询，Plugin中有具体获取数据的逻辑。Ceilometer中的Agent分为Central Agent和Compute Agent。
Central Agent负责管理除了Compute（Nova）之外所有的Plugin，例如Swift，Cinder的Plugin。这些Plugin通过RPC调用相关服务的API并获取数据，然后将数据publish到Message Queue。Central Agent作为一个中心的数据采集调度器，之需要部署一个即可。
Compute Agent负责Compute节点的数据采集，在每一个Compute节点都需要部署一个Compute Agent。它一方主要负责周期性的采集Compute相关的数据并发布到MQ。
目前所规划的监控指标：http://docs.openstack.org/developer/ceilometer/measurements.html</p>

<h4 id="plugin">Plugin</h4>

<p>Ceilometer实现的Plugin框架依赖setuptools的Dynamic Discovery of Services and Plugins实现。这是Ceilometer能进行扩展的基础。Ceilometer中有四种类型的Plugin：Poller，Publisher，Notification和Transformer。</p>

<p>Poller主要负责被Agent调用去查询数据，返回Counter类型的结果给Agent框架；</p>

<ul>
  <li>Notification负责在MQ中监听相关topic的消息（虚拟机创建等），并把他转换成Counter类型的结果给Agent框架。</li>
  <li>Transformer负责转换Counter（目前在代码中还没有发现具体用例）</li>
  <li>Publisher负责将Agent框架中Counter类型的结果转换成消息（包括签名），并将消息发送到MQ；</li>
  <li>Agent的Pipeline定义了这些插件之间的数据流。Agent的Plugin框架就向一个流水线，每个Plugin就像流水线上的工人。</li>
</ul>

<h4 id="collector">Collector</h4>

<p>Collector负责监听消息队列，将Publisher发布的消息（Meter Message）存储到DataStore。</p>

<h4 id="datastore">DataStore</h4>

<p>由MongoDB实现。</p>

<h4 id="api">API</h4>

<p>负责为其它项目提供数据，例如计费、面板等。</p>

<p><a href="http://www.cnblogs.com/alexyang8/archive/2013/02/18/2915981.html">原文地址</a></p>

        <!--百度分享-->
     <div class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more">分享到：</a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博">新浪微博</a><a href="#" class="bds_sqq" data-cmd="sqq" title="分享到QQ好友">QQ好友</a><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间">QQ空间</a><a href="#" class="bds_tieba" data-cmd="tieba" title="分享到百度贴吧">百度贴吧</a><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信">微信</a><a href="#" class="bds_douban" data-cmd="douban" title="分享到豆瓣网">豆瓣网</a><a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网">人人网</a></div>
     <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"share":{"bdSize":16},"image":{"viewList":["tsina","sqq","qzone","tieba","weixin","douban","renren"],"viewText":"分享到：","viewSize":"24"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","sqq","qzone","tieba","weixin","douban","renren"]}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>
        <!--网易云跟贴-->
        <div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
    </article>
</div>

<!-- 引入google code pretiffy -->
<script src="/js/jquery.min.js"></script>
<script src="/js/google-code-prettify/prettify.js"></script>
<script type="text/javascript">
    $(function(){
      $("pre").addClass("prettyprint linenums");
      prettyPrint();
      });
    </script>

<!-- 添加博文分割线 -->
<hr class="post-list__divider" />
<section>
       <ul class="pager">
        
        <li class="previous">
            <a href="/2013/03/20/different-bewteen-kvm-xen-qemu.html" data-toggle="tooltip" data-placement="top" title="虚拟化中KVM, Xen, Qemu的区别">上一篇：  <span>虚拟化中KVM, Xen, Qemu的区别</span>
            </a>
        </li>
        
        
        <li class="next">
            <a href="/2013/03/21/vnc-vs-rdp.html" data-toggle="tooltip" data-placement="top" title="VNC和远程桌面的区别">下一篇：  <span>VNC和远程桌面的区别</span>
            </a>
        </li>
        
    </ul>
</section>


<!-- 多说评论框 start -->



        <footer>
  &copy; 2015-2017 喵喵清吟,blog.mana.love <br/>Powered by <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> Themes <a href="http://github.com/renyuanz/leonids/" target="_blank">Leonids</a>
</footer>




      </div>
    </div>
  </div>
  <script type="text/javascript" src="https://blog.mana.love/js/jquery-2.1.4.min.js"></script>
<script src="https://img1.cache.netease.com/f2e/tie/yun/sdk/loader.js"></script>
<script type="text/javascript" src="https://blog.mana.love/js/main.js"></script>
<!--访问量统计工具 Hit Kounter v0.2-->
<script src="https://blog.mana.love/js/av-mini-0.6.10.js"></script>
<script src="https://blog.mana.love/js/hit-kounter-lc-0.2.0.js"></script>
<script type="text/javascript">
    var cloudTieConfig = {
        url: document.location.href,
        sourceId: "",
        productKey: "86a52c1e48c0450385a25e49e7c984cd",
        target: "cloud-tie-wrapper"
    };
    var yunManualLoad = true;
    Tie.loader("aHR0cHM6Ly9hcGkuZ2VudGllLjE2My5jb20vcGMvbGl2ZXNjcmlwdC5odG1s", true);
</script>


</body>
</html>
